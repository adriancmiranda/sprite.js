// sprite.js@v0.0.1, MIT licensed. https://github.com/adriancmiranda/sprite.js
!function(t,e,n){"use strict";function o(t,e){if(t===!1)return"Boolean";if(""===t)return"String";if(0===t)return"Number";if(t&&t.constructor){var n=(t.constructor.toString()||Object.prototype.toString.apply(t)).replace(/^.*function([^\s]*|[^\(]*)\([^\x00]+$/,"$1").replace(/^(\[object\s)|]$/g,"").replace(/\s+/,"")||"Object";return e===!0||/^(Boolean|RegExp|Number|String|Array|Date)$/.test(n)?n:"Object"}return t}function r(e,n){var r=typeof e;return e===!1?"boolean":""===e?"string":(e&&"object"===r&&(r=o(e,n),r=String(r).toLowerCase()),"number"===r&&!t.isNaN(e)&&t.isFinite(e)?n===!0&&t.parseFloat(e)===t.parseInt(e,10)?0>e?"int":"uint":"number":e?r:e)}function i(e,n){return e=t.parseFloat(e),e=t.isNaN(e)||!t.isFinite(e)?0:e,n===!0&&(e=t.parseInt(1e4*e,10)/1e4),e}function a(t){return"string"===r(t)?/^(true|(^[1-9][0-9]*$)$|yes|y|sim|s|on)$/gi.test(t):!!t}function s(e){return 0|t.parseInt(e,10)}function u(t){return t=s(t),0>t?0:t}function l(t,e,n){return r(t)?r(n)?void t.setAttribute("data-"+e,n):t.getAttribute("data-"+e):null}function m(t,e,n){var o,i={};e="object"===r(e)?e:{};for(o in t){var a=l(n,o);i[o]=e.hasOwnProperty(o)||a?e[o]||a:t[o]}return i}function c(t,e,n,o,r,i,a){var s,u,l,m,c,p=[];for(s=0;t>s;s++)l=a?~~(s/e):s%e,u=a?s%e:~~(s/e),m=Math.round(n+r)*l,c=Math.round(o+i)*u,p.push({column:l,row:u,x:0-m,y:0-c,frame:s,label:""});return p}function p(e,n){return t.getComputedStyle?t.getComputedStyle(e,null)[n]:e.currentStyle[n]}function f(t){var e=(p(t,"backgroundPosition")||p(t,"backgroundPositionX")+" "+p(t,"backgroundPositionY")).replace(/left|top/gi,0).split(" ");return{x:s(e[0]),y:s(e[1])}}function g(t){var e=p(t,"backgroundImage")||"";return e.replace(/url\(|\)|"|'/g,"")}function F(t){var e,n,o,r;return e=(p(t,"backgroundSize")||"").split(" "),n=/^(0|[0-9]+.?[0-9]+?px)$/,o=/^(0|[0-9]+.?[0-9]+?\%)$/,r={x:1,y:1},n.test(e[0])&&(r.x=parseInt(e[0]),r.y=parseInt(e[0])),o.test(e[0])&&(r.x=parseFloat(e[0])/100||1,r.y=parseFloat(e[0])/100||1),n.test(e[1])&&(r.y=parseInt(e[1])),o.test(e[1])&&(r.y=parseFloat(e[1])/100||1),r}function y(t,e,n){return t=i(t),e=i(e),n=i(n),t>n?n:e>t?e:t}function d(t,e,n){return t=i(t),e=i(e),n=i(n),t%=n,i(e>t?t+n:t)}!function(){var e,n,o,r,i,a;for(n=0,o=["ms","moz","webkit","o"],e=0;e<o.length&&!t.requestAnimationFrame;++e)r=o[e]+"RequestAnimationFrame",i=o[e]+"CancelAnimationFrame",a=o[e]+"CancelRequestAnimationFrame",t.requestAnimationFrame=t[r],t.cancelAnimationFrame=t[i]||t[a];t.requestAnimationFrame||(t.requestAnimationFrame=function(e,o){var r,i,a;return r=(new Date).getTime(),i=Math.max(0,16-(r-n)),a=t.setTimeout(function(){e(r+i,o)},i),n=r+i,a}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){t.clearTimeout(e)})}(),n.Utils=n.Utils||{},n.Utils.getDefinitionName=o,n.Utils.typeOf=r,n.Utils.num=i,n.Utils.bool=a,n.Utils.int=s,n.Utils.uint=u,n.Utils.data=l,n.Utils.merge=m,n.Utils.gridLayout=c,n.Utils.getStyle=p,n.Utils.getBackgroundOffsetFrom=f,n.Utils.getBackgroundImageFrom=g,n.Utils.getBackgroundSizeFrom=F,n.Utils.bound=y,n.Utils.mod=d,n.Sprite=function(e,n){function o(e){l(),I=t.setTimeout(function(){T=p(h,v.element,v.fps),"function"==typeof N.onStart&&N.onStart.apply(v,N.onStartParams),v.running=!0},e)}function l(){t.clearTimeout(I),v.running=!1,I=0}function p(e,n,o){var i,a;if("function"===r(e))return"number"===r(n)&&(o=n,n=null),a=++S.animationID,o=1e3/y(o||10,1,60),S.animations[a]={timeout:0,rAF:0},i=Array.prototype.slice.call(arguments,0),i.splice(0,3),function s(){S.animations[a].timeout=t.setTimeout(function(){S.animations[a].rAF=t.requestAnimationFrame(s,n),e.apply(null,i)},o)}(),a}function b(e){r(S.animations[e])&&(t.clearTimeout(S.animations[e].timeout),t.cancelAnimationFrame(S.animations[e].rAF),delete S.animations[e])}function A(t){v.lastFrame=v.currentFrame,v.currentFrame=d(u(t),1,v.totalFrames),v.row=v.timeline[v.currentFrame-1].row,v.column=v.timeline[v.currentFrame-1].column,v.offsetX=v.timeline[v.currentFrame-1].x+v.image.x,v.offsetY=v.timeline[v.currentFrame-1].y+v.image.y,v.element.style.backgroundPosition=v.offsetX+"px "+v.offsetY+"px"}function h(){"function"==typeof N.onUpdate&&N.onUpdate.apply(v,N.onUpdateParams),v.currentFrame<v.targetFrame?A(v.currentFrame+P):v.currentFrame>v.targetFrame?A(v.currentFrame+P):v.currentFrame===v.targetFrame&&(v.looping?v.yoyo?v.loopBetween(v.currentFrame,v.targetNextFrame,v.yoyo,N):v.loopBetween(v.targetNextFrame,v.currentFrame,v.yoyo,N):(v.pause(),"function"==typeof N.onComplete&&N.onComplete.apply(v,N.onCompleteParams)))}var v=this,S=v.constructor.static,x=f(e),w=g(e),U=F(e),j=0,I=0,P=1,T=null,N={};v.id=S.instances++,v.element=e,v.image={url:w,size:U,object:new Image,x:x.x,y:x.y},v.options=m(S.defaults,n,v.element),v.responsive=a(v.options.responsive),v.fps=i(v.options.fps),v.totalFrames=Math.max(1,u(v.options.totalFrames)),v.columns=u(v.options.columns),v.rows=u(v.options.rows),1===v.totalFrames&&(v.totalFrames=v.columns*v.rows),v.currentFrame=y(v.options.currentFrame,1,v.totalFrames),v.vertical=a(v.options.vertical),v.tileW=i(v.options.tileW)||v.element.clientWidth,v.tileH=i(v.options.tileH)||v.element.clientHeight,v.column=i(v.currentFrame%v.rows),v.row=~~(v.currentFrame/v.columns),v.timeline=c(v.totalFrames,v.vertical?v.rows:v.columns,v.tileW,v.tileH,0,0,v.vertical),v.duration=v.totalFrames/v.fps,v.lastFrame=v.currentFrame,v.targetNextFrame=0,v.targetFrame=0,v.offsetX=x.x,v.offsetY=x.y,v.reverse=!1,v.running=!1,v.looping=!1,v.yoyo=!1,v.load=function(t){t="object"===r(t)?t:{},v.image.object.src=v.image.url,v.image.object.onload=function(){v.image.width=v.image.object.width,v.image.height=v.image.object.height,"function"==typeof t.onLoad&&t.onLoad.apply(v,t.onLoadParams)}},v.refresh=function(){v.tileW=i(v.options.tileW)||v.element.clientWidth,v.tileH=i(v.options.tileH)||v.element.clientHeight,v.timeline=c(v.totalFrames,v.vertical?v.rows:v.columns,v.tileW,v.tileH,0,0,v.vertical),A(v.currentFrame)},v.play=function(t,e){v.pause(),"uint"===r(t,!0)?(N="object"===r(e)?e:{},v.targetFrame=y(t,1,v.totalFrames),v.reverse=v.currentFrame>v.targetFrame,P=v.reverse?-1:1):v.targetFrame=0,"function"==typeof N.onInit&&N.onInit.apply(v,N.onInitParams),o(i(N.delay))},v.pause=function(){l(),b(T),T=null},v.togglePause=function(){v[T?"pause":"play"]()},v.stop=function(){l(),A(0),v.pause()},v.playToBeginAndStop=function(t){v.play(0,t)},v.playToEndAndStop=function(t){v.play(v.totalFrames,t)},v.gotoRandomFrame=function(){v.gotoAndStop(~~(Math.random()*v.totalFrames)+1)},v.fromTo=function(e,n,o){o="object"===r(o)?o:{},t.clearTimeout(j),j=0,j=t.setTimeout(function(){delete o.delay,v.gotoAndStop(e),v.play(n,o)},i(o.delay))},v.gotoAndPlay=function(t){l(),A(t),v.play()},v.gotoAndStop=function(t){l(),A(t),v.pause()},v.nextFrame=function(){v.jumpFrames(1)},v.prevFrame=function(){v.jumpFrames(-1)},v.jumpFrames=function(t){v.gotoAndStop(v.currentFrame+s(t))},v.loopBetween=function(t,e,n,o){t=y(t,1,v.totalFrames),e=y(e,0,v.totalFrames),v.gotoAndStop(t),v.running=!0,v.looping=!0,v.yoyo=a(n),v.targetNextFrame=t,0===e&&(e=v.totalFrames),v.play(e,o)},v.cancelLooping=function(){v.running=!1,v.looping=!1,v.yoyo=!1},v.toString=function(){return"AM[Sprite "+v.id+"]"}},n.Sprite.static={instances:0,animationID:0,animations:{},defaults:{responsive:!1,fps:24,totalFrames:1,currentFrame:1,vertical:!1,tileW:0,tileH:0,columns:0,rows:0}},n.cacheResizer=t.onresize,t.onresize=function(){for(var t=0;t<n.Sprite.static.instanceList.length;t++)n.Sprite.static.instanceList[t].responsive&&n.Sprite.static.instanceList[t].refresh();n.cacheResizer&&n.cacheResizer()}}(this,this.document,this.AM=this.AM||{});